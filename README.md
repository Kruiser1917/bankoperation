# Banking Operations Widget

Этот проект представляет собой виджет для обработки клиентских банковских операций. 
Виджет предоставляет функции для фильтрации и сортировки банковских транзакций по их состоянию и дате.

## Описание проекта

Этот виджет предназначен для управления и обработки клиентских банковских операций. Он включает функции для фильтрации транзакций по состоянию и сортировки их по дате. Проект соответствует рекомендациям PEP 8, использует аннотации типов и обеспечивает качество кода с помощью `flake8` и `mypy`.

## Функциональные возможности

- **Фильтрация транзакций**: Фильтрация списка транзакций по их состоянию.
- **Сортировка транзакций**: Сортировка списка транзакций по дате в порядке возрастания или убывания.

## Установка зависимостей

Для установки зависимостей используйте Poetry:

```bash
poetry install
```
## Тестирование

Проект покрыт тестами с использованием библиотеки `pytest`. Для запуска тестов выполните команду:

```bash
poetry run pytest --cov=src --cov-report=term-missing
```

## Новые функции

### Генераторы для обработки транзакций

#### filter_by_currency


Функции
utils.py
load_operations_from_json(filepath: str) -> List[Dict[str, Any]]
Читает данные о транзакциях из JSON-файла и возвращает список словарей. Если файл пустой, содержит не список или не найден, функция возвращает пустой список.
external_api.py
convert_to_rub(transaction: Dict[str, Any]) -> float
Конвертирует сумму транзакции в рубли. Если транзакция была в USD или EUR, происходит обращение к внешнему API для получения текущего курса валют и конвертации суммы операции в рубли.
decorators.py
log
Декоратор для логирования вызова функций и их результатов. Логи могут записываться в файл или выводиться в консоль.
generators.py
filter_by_currency(transactions: List[Dict[str, Any]], currency: str) -> Iterator[Dict[str, Any]]

Фильтрует транзакции по указанной валюте и возвращает итератор.
transaction_descriptions(transactions: List[Dict[str, Any]]) -> Iterator[str]

Возвращает описания каждой транзакции по очереди.
card_number_generator(start: int, end: int) -> Iterator[str]

Генерирует номера банковских карт в формате XXXX XXXX XXXX XXXX в заданном диапазоне.
processing.py
filter_by_state(transactions: List[Dict[str, Any]], state: str = "EXECUTED") -> List[Dict[str, Any]]

Фильтрует транзакции по состоянию.
sort_by_date(transactions: List[Dict[str, Any]], order: bool = True) -> List[Dict[str, Any]]

Сортирует транзакции по дате.
widget.py
format_datetime_to_date(datetime_str: str) -> str

Форматирует строку даты и времени в формат даты.
universal_masking(input_str: str) -> str

Маскирует номер карты или счета.